(function(t){function e(e){for(var o,n,i=e[0],l=e[1],c=e[2],u=0,d=[];u<i.length;u++)n=i[u],s[n]&&d.push(s[n][0]),s[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);m&&m(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],o=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(o=!1)}o&&(a.splice(e--,1),t=n(n.s=r[0]))}return t}var o={},s={app:0},a=[];function n(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=o,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var m=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var o=r("64a9"),s=r.n(o);s.a},"4afd":function(t,e,r){t.exports=r.p+"static/img/power.c67d0544.gif"},5414:function(t,e,r){},5694:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),s=r("5c96"),a=r.n(s);r("0fae");o["default"].use(a.a,{size:"small",zIndex:3e3});var n,i,l,c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},m=[],u={name:"app",components:{}},d=u,p=(r("034f"),r("2877")),f=Object(p["a"])(d,c,m,!1,null,null,null),h=f.exports,_=r("8c4f"),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-header",[r("el-row",{attrs:{gutter:20}},[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"0",mode:"horizontal","active-text-color":"#000000"}},[r("el-col",{attrs:{span:9,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"0"},on:{click:t.to_home}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n        ACC空调管理系统\n        ")])],1)],1)],1),r("el-main",[r("el-carousel",{staticStyle:{"z-index":"1"},attrs:{interval:4e3,height:"580px"}},t._l(t.imglist,function(t){return r("el-carousel-item",{key:t},[r("div",[r("img",{attrs:{src:t.src}})])])}),1),r("el-card",{staticClass:"card",attrs:{shadow:"always"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("参数设置")])]),r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"130px"}},[r("el-form-item",{attrs:{prop:"url",rules:[{required:!0,message:"请输入主机地址",trigger:"blur"}],label:"主机地址："}},[r("el-input",{attrs:{placeholder:"请输入地址"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}},[r("template",{slot:"prepend"},[t._v("http://")])],2)],1),r("el-form-item",{attrs:{label:"房间号码：",prop:"roomId"}},[r("el-input",{attrs:{placeholder:"非从机设置可不输入"},model:{value:t.form.roomId,callback:function(e){t.$set(t.form,"roomId",t._n(e))},expression:"form.roomId"}})],1),r("el-button",{staticStyle:{"background-color":"orange",color:"white",width:"100px"},attrs:{weight:"50px"},on:{click:function(e){return t.set_para("form")}}},[t._v("设置参数")])],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-button",{staticClass:"btn",attrs:{disabled:t.disable||t.roomable,type:"primary"},on:{click:function(e){return t.to_costumer()}}},[t._v(" 客房")])],1),r("el-col",{attrs:{span:6}},[r("el-button",{staticClass:"btn",attrs:{disabled:t.disable,type:"success"},on:{click:function(e){return t.to_desk()}}},[t._v(" 前台")])],1),r("el-col",{attrs:{span:6}},[r("el-button",{staticClass:"btn",attrs:{disabled:t.disable,type:"warning"},on:{click:function(e){return t.to_manager()}}},[t._v(" 经理")])],1),r("el-col",{attrs:{span:6}},[r("el-button",{staticClass:"btn",attrs:{disabled:t.disable,type:"danger"},on:{click:function(e){return t.to_administrator()}}},[t._v(" 管理员")])],1)],1)],1)],1)},v=[],w={name:"homepage",components:{},data:function(){return{disable:!0,roomable:!0,form:{url:"",roomId:""},username:"",imglist:[{id:1,src:r("9137")},{id:2,src:r("abe9")}]}},computed:{},created:function(){this.init()},methods:{init:function(){"null"!=sessionStorage.getItem("url")&&(this.form.url=sessionStorage.getItem("url").slice(7))},set_para:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("请检查输入是否正确！"),!1;sessionStorage.setItem("url","http://"+e.form.url),sessionStorage.setItem("roomId",e.form.roomId),e.disable=!1,null!=e.form.roomId&&(e.roomable=!1)})},to_costumer:function(){this.$router.push("/costumer")},to_desk:function(){this.$router.push("/desk")},to_manager:function(){this.$router.push("/manager")},to_administrator:function(){this.$router.push("/administrator")}}},b=w,x=(r("5735"),Object(p["a"])(b,g,v,!1,null,"594d653b",null)),y=x.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-header",[r("el-row",{attrs:{gutter:20}},[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"0",mode:"horizontal","active-text-color":"#000000","background-color":"#FFFFFF"}},[r("el-col",{attrs:{span:9,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"0"}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n          ACC空调管理系统\n          ")])],1)],1)],1),r("el-main",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-row",[r("span",{staticStyle:{"font-size":"40px"}},[t._v("显示")])]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"current"},[r("el-row",[r("span",{staticStyle:{"font-size":"20px"}},[t._v("实时信息")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否入住："+t._s(t.isCheckIn))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否开机："+t._s(t.isOpen))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否服务："+t._s(t.isServing))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前风速："+t._s(t.cur_wind))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前温度："+t._s(t.cur_temp)+"℃")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前费率："+t._s(t.fee_rate)+"元/分")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前费用："+t._s(t.fee)+"元")])])],1)]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"setting"},[r("el-row",[r("span",{staticStyle:{"font-size":"20px"}},[t._v("设定信息")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否开机："+t._s(t.ispower))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前模式："+t._s(t.model))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("室外温度："+t._s(t.outdoor)+"℃")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("设定温度："+t._s(t.set_temp)+"℃")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("设定风速："+t._s(t.set_wind))])])],1)])],1),r("el-col",{attrs:{span:12}},[r("el-row",[r("span",{staticStyle:{"font-size":"40px"}},[t._v("遥控")])]),r("div",{staticClass:"controler"},[r("el-row",{attrs:{gutter:40}},[r("el-button",{staticStyle:{width:"120px"},attrs:{type:"success"},on:{click:function(e){return t.request_on()}}},[t._v("开机")]),r("el-button",{staticStyle:{width:"120px"},attrs:{type:"danger"},on:{click:function(e){return t.request_off()}}},[t._v("关机")])],1),r("el-row",{attrs:{gutter:40}},[r("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(e){return t.temp_inc()}}},[t._v("温度 +")]),r("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(e){return t.temp_dec()}}},[t._v("温度 -")])],1),r("el-row",{attrs:{gutter:40}},[r("el-button",{staticStyle:{width:"75px"},attrs:{type:"warning"},on:{click:function(e){return t.wind_change(0)}}},[t._v("弱风")]),r("el-button",{staticStyle:{width:"75px"},attrs:{type:"warning"},on:{click:function(e){return t.wind_change(1)}}},[t._v("中风")]),r("el-button",{staticStyle:{width:"75px"},attrs:{type:"warning"},on:{click:function(e){return t.wind_change(2)}}},[t._v("强风")])],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}}),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"image"},[r("img",{directives:[{name:"show",rawName:"v-show",value:"正在服务"==t.isServing,expression:"isServing == '正在服务'"}],attrs:{src:t.img1.src,height:"203",width:"630"}}),r("img",{directives:[{name:"show",rawName:"v-show",value:"正在服务"!=t.isServing,expression:"isServing != '正在服务'"}],attrs:{src:t.img2.src,height:"203",width:"600"}})])]),r("el-col",{attrs:{span:8}})],1)],1),r("el-dialog",{attrs:{title:"设置初始温度",visible:t.dialogVisible,width:"30%","close-on-press-escape":t.dis,"show-close":t.dis},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-input",{attrs:{placeholder:"请输入初始温度数值"},model:{value:t.outdoor,callback:function(e){t.outdoor=e},expression:"outdoor"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){return t.set_oritemp(t.outdoor)}}},[t._v("确 定")])],1)],1)],1)},k=[],I=(r("c5f6"),r("6b54"),r("bd86")),$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[r("el-col",{attrs:{span:6}},[r("el-popover",{staticClass:"left",attrs:{placement:"top",width:"202",trigger:"hover"}},[r("span",{staticStyle:{position:"relative",right:"-15%"}},[t._v("前端工程：  ")]),r("br"),r("span",{staticStyle:{position:"relative",right:"-15%"}},[t._v("后端工程：")]),r("br"),r("el-button",{staticStyle:{"font-size":"17px",color:"#FFF"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("关于我们")])],1)],1),r("el-col",{attrs:{span:6}},[r("el-popover",{staticClass:"left",attrs:{placement:"top",width:"240",trigger:"hover"}},[r("span",{staticStyle:{position:"relative"}},[t._v("      本项目前端工程基于Vue框架开发，后端工程基于Django框架开发，本小组成员保留对一切bug的解释权。")]),r("br"),r("el-button",{staticStyle:{"font-size":"17px",color:"#FFF"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("关于项目")])],1)],1)],1)},S=[],F={name:"footer",data:function(){return{}},methods:{}},O=F,j=Object(p["a"])(O,$,S,!1,null,null,null),D=j.exports,E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",{attrs:{gutter:20}},[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"0",mode:"horizontal","active-text-color":"#000000"}},[r("el-col",{attrs:{span:10,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"0"},on:{click:t.to_home}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n          ACC空调管理系统\n          ")]),r("el-col",{attrs:{span:5,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"1"},on:{click:t.log_out}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n          登出\n          ")])],1)],1)},z=[],A={name:"header",data:function(){return{}},methods:{to_home:function(){this.$router.push("/")},to_login:function(){this.$router.push("/login")},log_out:function(){this.$ajax({type:"HEAD",method:"DELETE",url:"/api/session",withCredentials:!0,crossDomain:!0}),this.$router.push("/login")}}},H=A,q=Object(p["a"])(H,E,z,!1,null,null,null),R=q.exports,L={name:"Costumer",components:{userHeader:R,Myfooter:D},data:function(){var t;return t={c:0,timer:!1,dis:!1,dialogVisible:!0,shoudong:!1,url:"",img1:{id:1,src:r("4afd")},img2:{id:2,src:r("b12a")},roomId:"",set_temp:24,model:"制冷",cur_temp:"",set_wind:"中风",wind:"low",cur_wind:"",ispower:"未开机",isCheckIn:"未入住",isOpen:"未开机",isServing:"未在服务"},Object(I["a"])(t,"wind",["弱风","中风","强风"]),Object(I["a"])(t,"winden",["low","mid","high"]),Object(I["a"])(t,"fee_rate",0),Object(I["a"])(t,"fee",0),Object(I["a"])(t,"maxt",""),Object(I["a"])(t,"mint",""),Object(I["a"])(t,"checkin",["未入住","已入住"]),Object(I["a"])(t,"open",["未开机","已开机"]),Object(I["a"])(t,"serve",["未在服务","正在服务"]),Object(I["a"])(t,"outdoor",""),t},created:function(){this.init()},mounted:function(){},destroyed:function(){clearInterval(n)},methods:{set_oritemp:function(t){this.dialogVisible=!1,this.cur_temp=t},init:function(){this.cur_temp=this.outdoor,this.url=sessionStorage.getItem("url"),this.roomId=sessionStorage.getItem("roomId")},changtemp:function(){"未开机"==this.isOpen&&(0==this.shoudong&&"制冷"==this.model&&1*this.cur_temp>=this.set_temp+1&&(this.c=0,window.clearInterval(i),this.request_on()),0==this.shoudong&&"制暖"==this.model&&1*this.cur_temp<=this.set_temp-1&&(this.c=0,window.clearInterval(i),this.request_on()),"制冷"==this.model&&1*this.cur_temp<1*this.outdoor?1*this.outdoor-1*this.cur_temp<.5/60?this.cur_temp=this.outdoor.round():this.cur_temp=(1*this.cur_temp+.5/60).toFixed(2):"制暖"==this.model&&1*this.cur_temp>1*this.outdoor&&(1*this.cur_temp-1*this.outdoor<.5/60?this.cur_temp=this.outdoor.round():this.cur_temp=(1*this.cur_temp-.5/60).toFixed(2)))},request_info:function(){var t=this,e={room_id:this.roomId};this.$ajax({type:"HEAD",method:"post",url:this.url+"/customer/request_info/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:e}).then(function(e){t.isCheckIn=t.checkin[e.data.isCheckIn],t.isOpen=t.open[e.data.isOpen],t.ispower=t.open[e.data.isOpen],t.isServing=t.serve[e.data.isServing],t.fee_rate=e.data.fee_rate.toString(),t.fee=e.data.fee.toFixed(2).toString(),"high"==e.data.wind?t.cur_wind="强风":"mid"==e.data.wind?t.cur_wind="中风":"low"==e.data.wind&&(t.cur_wind="弱风"),1==e.data.isOpen&&(t.cur_temp=e.data.current_temp.toFixed(2)),t.isOpen==t.open[0]&&0==t.c&&(t.c=1,i=window.setInterval(t.changtemp,1e3))}).catch(function(t){})},request_on:function(){var t=this,e={room_id:Number(this.roomId),current_room_temp:Number(this.cur_temp)};this.$ajax({type:"HEAD",method:"post",url:this.url+"/customer/request_on/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:e}).then(function(e){200==e.status&&(t.timer||(n=setInterval(t.request_info,1e3),t.timer=!0),"cold"==e.data.model?t.model="制冷":"hot"==e.data.model&&(t.model="制暖"),t.set_temp=e.data.target_temp,t.maxt=e.data.temp_high_limit,t.mint=e.data.temp_low_limit,t.ispower="已开机",t.isOpen="已开机",t.shoudong=!1)}).catch(function(e){t.$message.error(e.response.data.message)})},request_off:function(){var t=this;if(this.shoudong=!0,"未开机"==this.ispower)this.$message({message:"未开机！",type:"warning"});else if("未开机"!=this.ispower){var e={room_id:Number(this.roomId),current_room_temp:Number(this.cur_temp)};this.$ajax({type:"HEAD",method:"post",url:this.url+"/customer/request_off/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:e}).then(function(e){200==e.status&&(t.ispower="未开机",t.isOpen="未开机",t.shoudong=!0,i=window.setInterval(t.changtemp,1e3))}).catch(function(e){t.$message.error(e.response.data.message)})}},temp_inc:function(){var t=this;if("已开机"==this.ispower)if(this.set_temp+1>this.maxt)this.$message({message:"超出可设定温度上限！",type:"warning"});else{var e={room_id:Number(this.roomId),target_temp:this.set_temp+1};this.$ajax({type:"HEAD",method:"post",url:this.url+"/customer/change_target_temp/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:e}).then(function(e){200==e.status&&t.set_temp++}).catch(function(e){t.$message.error(e.response.data.message)})}else this.$message({message:"未开机！",type:"warning"})},temp_dec:function(){var t=this;if("已开机"==this.ispower)if(this.set_temp-1<this.mint)this.$message({message:"超出可设定温度下限！",type:"warning"});else{var e={room_id:Number(this.roomId),target_temp:this.set_temp-1};this.$ajax({type:"HEAD",method:"post",url:this.url+"/customer/change_target_temp/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:e}).then(function(e){200==e.status&&t.set_temp--}).catch(function(e){t.$message.error(e.response.data.message)})}else this.$message({message:"未开机！",type:"warning"})},wind_change:function(t){var e=this;if("已开机"==this.ispower){if(this.set_wind!=this.wind[t]){var r={room_id:Number(this.roomId),fan_speed:this.winden[t]};this.$ajax({type:"HEAD",method:"post",url:this.url+"/customer/change_fan_speed/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:r}).then(function(r){200==r.status&&(e.set_wind=e.wind[t])}).catch(function(t){e.$message.error(t.response.data.message)})}}else this.$message({message:"未开机！",type:"warning"})}}},U=L,P=(r("e005"),Object(p["a"])(U,C,k,!1,null,"d7149f4a",null)),N=P.exports,M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-header",[r("el-row",{attrs:{gutter:20}},[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"0",mode:"horizontal","active-text-color":"#000000","background-color":"#FFFFFF"}},[r("el-col",{attrs:{span:9,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"0"},on:{click:t.to_home}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n        ACC空调管理系统\n        ")])],1)],1)],1),r("el-main",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-row",[r("span",{staticStyle:{"font-size":"40px"}},[t._v("操作面板")])]),r("div",{staticClass:"power_on"},[r("el-row",[r("span",{staticStyle:{"font-size":"20px"}},[t._v("主机信息")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否开机："+t._s(t.isPoweron))])]),r("el-row",{attrs:{gutter:40}},[r("el-button",{staticStyle:{width:"120px"},attrs:{type:"success"},on:{click:function(e){return t.power_on()}}},[t._v("开机")]),r("el-button",{staticStyle:{width:"120px"},attrs:{type:"danger"},on:{click:function(e){return t.power_off()}}},[t._v("关机")])],1)],1),r("div",{staticClass:"set_p"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.Rules,"label-width":"130px",size:"mini"}},[r("el-form-item",{attrs:{label:"工作模式："}},[r("el-radio-group",{model:{value:t.form.model,callback:function(e){t.$set(t.form,"model",e)},expression:"form.model"}},[r("el-radio",{attrs:{label:"hot"}},[t._v("制暖")]),r("el-radio",{attrs:{label:"cold"}},[t._v("制冷")])],1)],1),r("el-form-item",{attrs:{label:"温度区间："}},[r("el-col",{staticClass:"line",attrs:{span:8}},[r("el-form-item",{attrs:{prop:"mint",rules:[{required:!0,message:"最低温度不能为空"},{type:"number",message:"必须为数字值"}]}},[r("el-input",{on:{change:t.changemint},model:{value:t.form.mint,callback:function(e){t.$set(t.form,"mint",t._n(e))},expression:"form.mint"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),r("el-col",{staticClass:"line",attrs:{span:14}},[r("el-form-item",{attrs:{prop:"maxt",rules:[{required:!0,message:"最高温度不能为空"},{type:"number",message:"必须为数字值"}]}},[r("el-input",{on:{change:t.changemaxt},model:{value:t.form.maxt,callback:function(e){t.$set(t.form,"maxt",t._n(e))},expression:"form.maxt"}},[r("template",{slot:"append"},[t._v("℃")])],2)],1)],1)],1),r("el-form-item",{attrs:{label:"默认目标温度：",prop:"target",rules:[{required:!0,message:"最低温度不能为空"},{type:"number",message:"必须为数字值"}]}},[r("el-input",{model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",t._n(e))},expression:"form.target"}},[r("template",{slot:"append"},[t._v("℃")])],2)],1),r("el-form-item",{attrs:{label:"高风速费率：",prop:"fee_rate_h"}},[r("el-input",{model:{value:t.form.fee_rate_h,callback:function(e){t.$set(t.form,"fee_rate_h",e)},expression:"form.fee_rate_h"}},[r("template",{slot:"append"},[t._v("元/分钟")])],2)],1),r("el-form-item",{attrs:{label:"中风速费率：",prop:"fee_rate_m"}},[r("el-input",{model:{value:t.form.fee_rate_m,callback:function(e){t.$set(t.form,"fee_rate_m",e)},expression:"form.fee_rate_m"}},[r("template",{slot:"append"},[t._v("元/分钟")])],2)],1),r("el-form-item",{attrs:{label:"低风速费率：",prop:"fee_rate_l"}},[r("el-input",{model:{value:t.form.fee_rate_l,callback:function(e){t.$set(t.form,"fee_rate_l",e)},expression:"form.fee_rate_l"}},[r("template",{slot:"append"},[t._v("元/分钟")])],2)],1),r("el-form-item",{attrs:{label:"房间数：",prop:"num_rooms"}},[r("el-input-number",{attrs:{precision:0,min:1},model:{value:t.form.num_rooms,callback:function(e){t.$set(t.form,"num_rooms",t._n(e))},expression:"form.num_rooms"}})],1),r("el-form-item",{attrs:{label:"最大服务房间数：",prop:"num_serve"}},[r("el-input-number",{attrs:{precision:0,min:1},model:{value:t.form.num_serve,callback:function(e){t.$set(t.form,"num_serve",t._n(e))},expression:"form.num_serve"}})],1),r("div",{staticStyle:{padding:"0px"}},[r("el-button",{staticStyle:{"background-color":"orange",color:"white",width:"100px"},attrs:{weight:"50px"},on:{click:function(e){return t.set_para("form")}}},[t._v("设置参数")]),r("el-button",{staticStyle:{"background-color":"blue",color:"white",width:"100px"},attrs:{disabled:t.disabled,weight:"50px"},on:{click:function(e){return t.start_up()}}},[t._v("启动服务")])],1)],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-row",[r("span",{staticStyle:{"font-size":"40px"}},[t._v("查看房间")])]),r("div",{staticClass:"checkf"},[r("el-form",{ref:"checkForm",staticClass:"demo-ruleForm",attrs:{model:t.checkForm,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"房间号：",prop:"roomId",rules:[{required:!0,message:"房间号不能为空"},{type:"number",message:"请输入数字",trigger:["blur","change"]}]}},[r("el-input",{attrs:{type:"text",width:"100px",autocomplete:"off",placeholder:"请输入房间号"},model:{value:t.checkForm.roomId,callback:function(e){t.$set(t.checkForm,"roomId",t._n(e))},expression:"checkForm.roomId"}})],1)],1),r("div",{staticStyle:{padding:"10px"}},[r("el-button",{staticStyle:{width:"120px"},attrs:{type:"success"},on:{click:function(e){return t.check("checkForm")}}},[t._v("查看")])],1)],1),r("div",{staticClass:"room"},[r("el-row",[r("span",{staticStyle:{"font-size":"20px"}},[t._v("客房信息")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("房间号码："+t._s(t.checkId))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否入住："+t._s(t.isCheckIn))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否开机："+t._s(t.isOpen))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("是否服务："+t._s(t.isServing))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前风速："+t._s(t.cur_wind))])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前温度："+t._s(t.cur_temp)+"℃")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("目标温度："+t._s(t.tar_temp)+"℃")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前费率："+t._s(t.fee_rate)+"元/分")])]),r("el-row",[r("span",{staticClass:"text"},[t._v("当前费用："+t._s(t.fee)+"元")])])],1)],1)],1)],1)],1)},B=[],T={name:"Costumer",components:{userHeader:R,Myfooter:D},data:function(){return{checkId:"",url:"",roomId:"",disabled:!0,isPoweron:"未开机",checkForm:{roomId:""},isCheckIn:"未入住",isOpen:"未开机",isServing:"未服务",cur_wind:"",cur_temp:"",tar_temp:"",fee_rate:"",fee:"",chechen:["未入住","已入住"],open:["未开机","已开机"],serving:["未服务","已服务"],form:{model:"cold",mint:20,maxt:30,target:24,fee_rate_h:1,fee_rate_m:.5,fee_rate_l:.3,num_rooms:5,num_serve:3},Rules:{}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.url=sessionStorage.getItem("url"),this.roomId=sessionStorage.getItem("roomId")},start_up:function(){var t=this;this.$ajax({type:"HEAD",method:"post",url:this.url+"/administrator/start_up/",withCredentials:!0,crossDomain:!0,changeOrigin:!0}).then(function(e){200==e.status&&t.$message.success("启动服务成功！")}).catch(function(e){t.$message.error(e.response.data.message)})},check:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("请检查输入是否正确！"),!1;l&&window.clearInterval(l),e.checkId=e.checkForm.roomId,l=window.setInterval(e.sent_check,2e3)})},sent_check:function(){var t=this,e={room_id:this.checkId.toString()};this.$ajax({type:"HEAD",method:"post",url:this.url+"/administrator/check_room_state/",data:e,withCredentials:!0,crossDomain:!0,changeOrigin:!0}).then(function(e){200==e.status&&(t.isCheckIn=t.chechen[e.data.isCheckIn],t.isOpen=t.open[e.data.isOpen],t.isServing=t.serving[e.data.isServing],t.cur_temp=e.data.current_temp.toFixed(2),t.tar_temp=e.data.target_temp.toFixed(2),t.fee_rate=e.data.fee_rate.toFixed(2),t.fee=e.data.fee.toFixed(2),"high"==e.data.wind?t.cur_wind="强风":"mid"==e.data.wind?t.cur_wind="中风":"low"==e.data.wind&&(t.cur_wind="弱风"))}).catch(function(e){t.$message.error(e.response.data.message)})},set_para:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("请检查输入是否正确！"),!1;var r={model:e.form.model,temp_high_limit:e.form.maxt,temp_low_limit:e.form.mint,default_target_temp:e.form.target,fee_rate_h:e.form.fee_rate_h,fee_rate_m:e.form.fee_rate_m,fee_rate_l:e.form.fee_rate_l,num_rooms:e.form.num_rooms,num_serve:e.form.num_serve};e.$ajax({type:"HEAD",method:"post",url:e.url+"/administrator/set_para/",data:r,withCredentials:!0,crossDomain:!0,changeOrigin:!0}).then(function(t){200==t.status&&(e.$message.success("设置成功！请启动服务。"),e.disabled=!1)}).catch(function(t){e.$message.error(t.response.data.message)})})},changemint:function(){this.form.mint>=this.form.maxt&&(this.form.mint=this.form.maxt-1)},changemaxt:function(){this.form.mint<=this.form.maxt&&(this.form.maxt=this.form.mint+1)},to_home:function(){this.$router.push("/")},power_on:function(){var t=this;this.$ajax({type:"HEAD",method:"post",url:this.url+"/administrator/power_on/",withCredentials:!0,crossDomain:!0,changeOrigin:!0}).then(function(e){t.isPoweron="已开机",e.status}).catch(function(e){t.$message.error(e.response.data.message)})},power_off:function(){var t=this;this.$ajax({type:"HEAD",method:"post",url:this.url+"/administrator/power_off/",withCredentials:!0,crossDomain:!0,changeOrigin:!0}).then(function(e){200==e.status&&(t.isPoweron="已关机")}).catch(function(e){t.$message.error(e.response.data.message)})}}},V=T,J=(r("d020"),Object(p["a"])(V,M,B,!1,null,"6388a93d",null)),G=J.exports,K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-header",[r("el-row",{attrs:{gutter:20}},[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"0",mode:"horizontal","active-text-color":"#000000","background-color":"#FFFFFF"}},[r("el-col",{attrs:{span:9,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"0"},on:{click:t.to_home}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n        ACC空调管理系统\n        ")])],1)],1)],1),r("el-main",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-row",[r("span",{staticStyle:{"font-size":"40px"}},[t._v("打印详单")])]),r("div",{staticClass:"rdrf"},[r("el-form",{ref:"rdrForm",staticClass:"demo-ruleForm",attrs:{model:t.rdrForm,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"房间号：",prop:"roomId",rules:[{required:!0,message:"房间号不能为空"},{type:"number",message:"请输入数字",trigger:["blur","change"]}]}},[r("el-input",{attrs:{type:"text",width:"100px",autocomplete:"off",placeholder:"请输入房间号"},model:{value:t.rdrForm.roomId,callback:function(e){t.$set(t.rdrForm,"roomId",t._n(e))},expression:"rdrForm.roomId"}})],1)],1),r("div",{staticStyle:{padding:"10px"}},[r("el-button",{staticStyle:{"background-color":"orange",color:"white",width:"100px"},attrs:{weight:"50px"},on:{click:function(e){return t.printf_rdr("rdrForm")}}},[t._v("打印详单")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-row",[r("span",{staticStyle:{"font-size":"40px"}},[t._v("打印账单")])]),r("div",{staticClass:"rdrf"},[r("el-form",{ref:"invForm",staticClass:"demo-ruleForm",attrs:{model:t.invForm,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"房间号：",prop:"roomId",rules:[{required:!0,message:"房间号不能为空"},{type:"number",message:"请输入数字",trigger:["blur","change"]}]}},[r("el-input",{attrs:{type:"text",width:"100px",autocomplete:"off",placeholder:"请输入房间号"},model:{value:t.invForm.roomId,callback:function(e){t.$set(t.invForm,"roomId",t._n(e))},expression:"invForm.roomId"}})],1)],1),r("div",{staticStyle:{padding:"10px"}},[r("el-button",{staticStyle:{"background-color":"orange",color:"white",width:"100px"},attrs:{weight:"50px"},on:{click:function(e){return t.printf_inv("invForm")}}},[t._v("打印账单")])],1)],1)],1)],1)],1)],1)},Q=[],W={name:"Desk",components:{userHeader:R,Myfooter:D},data:function(){return{url:"",roomId:"",rdrForm:{roomId:""},invForm:{roomId:""}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.url=sessionStorage.getItem("url"),this.roomId=sessionStorage.getItem("roomId")},to_home:function(){this.$router.push("/")},printf_rdr:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("请检查输入是否正确！"),!1;var r={room_id:e.rdrForm.roomId};e.$ajax({type:"HEAD",method:"post",url:e.url+"/desk/print_rdr/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,responseType:"blob",data:r}).then(function(t){if(200==t.status){var r=new Blob([t.data]),o=e.rdrForm.roomId+"_详单.csv";if("download"in document.createElement("a")){var s=document.createElement("a");s.download=o,s.style.display="none",s.href=URL.createObjectURL(r),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(r,o)}}).catch(function(t){e.$message.error(t.response.data.message)})})},printf_inv:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("请检查输入是否正确！"),!1;var r={room_id:e.invForm.roomId};e.$ajax({type:"HEAD",method:"post",url:e.url+"/desk/print_invoice/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:r}).then(function(t){if(200==t.status){var r=new Blob([t.data]),o=e.invForm.roomId+"_账单.csv";if("download"in document.createElement("a")){var s=document.createElement("a");s.download=o,s.style.display="none",s.href=URL.createObjectURL(r),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(r,o)}}).catch(function(t){e.$message.error(t.response.data.message)})})}}},X=W,Y=(r("8239"),Object(p["a"])(X,K,Q,!1,null,"f2e24432",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticClass:"bg"},[r("el-header",[r("el-row",{attrs:{gutter:20}},[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"0",mode:"horizontal","active-text-color":"#000000","background-color":"#FFFFFF"}},[r("el-col",{attrs:{span:9,offset:1}},[r("pre")]),r("el-menu-item",{attrs:{index:"0"},on:{click:t.to_home}},[r("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n        ACC空调管理系统\n        ")])],1)],1)],1),r("el-main",[r("el-row",[r("el-col",{attrs:{span:8}}),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"f"},[r("el-radio",{attrs:{disabled:"",label:"0"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("日报表")]),r("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("周报表")]),r("el-radio",{attrs:{disabled:"",label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("月报表")]),r("el-radio",{attrs:{disabled:"",label:"3"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("年报表")]),r("div",{staticStyle:{padding:"10px"}},[r("el-button",{staticStyle:{"background-color":"orange",color:"white",width:"100px"},attrs:{weight:"50px"},on:{click:function(e){return t.printf_report()}}},[t._v("打印报表")])],1)],1)]),r("el-col",{attrs:{span:8}})],1)],1)],1)},et=[],rt={name:"Costumer",components:{userHeader:R,Myfooter:D},data:function(){return{url:"",roomId:"",radio:"1"}},created:function(){this.init()},methods:{init:function(){this.url=sessionStorage.getItem("url"),this.roomId=sessionStorage.getItem("roomId")},to_home:function(){this.$router.push("/")},printf_report:function(){var t=this,e={type:this.radio};this.$ajax({type:"HEAD",method:"post",url:this.url+"/manager/print_report/",withCredentials:!0,crossDomain:!0,changeOrigin:!0,data:e}).then(function(t){if(200==t.status){var e=t,r=new Blob([e.data]),o="报表.csv";if("download"in document.createElement("a")){var s=document.createElement("a");s.download=o,s.style.display="none",s.href=URL.createObjectURL(r),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(r,o)}}).catch(function(e){t.$message.error(e.response.data.message)})}}},ot=rt,st=(r("ad11"),Object(p["a"])(ot,tt,et,!1,null,"5d5eea03",null)),at=st.exports;o["default"].use(_["a"]);var nt=new _["a"]({mode:"hash",base:"",routes:[{path:"/",name:"home",component:y},{path:"/costumer",name:"costumer",component:N},{path:"/desk",name:"desk",component:Z},{path:"/manager",name:"manager",component:at},{path:"/administrator",name:"administrator",component:G}]}),it=r("2f62");o["default"].use(it["a"]);var lt=new it["a"].Store({state:{},mutations:{},actions:{}}),ct=r("bc3a"),mt=r.n(ct),ut=r("2819"),dt=r.n(ut);r("5414");o["default"].config.productionTip=!1,o["default"].prototype.$ajax=mt.a,mt.a.defaults.withCredentials=!0,o["default"].use(dt.a),new o["default"]({el:"#app",router:nt,store:lt,render:function(t){return t(h)}})},5735:function(t,e,r){"use strict";var o=r("8c9f"),s=r.n(o);s.a},"64a9":function(t,e,r){},8239:function(t,e,r){"use strict";var o=r("af31"),s=r.n(o);s.a},"8c9f":function(t,e,r){},9137:function(t,e,r){t.exports=r.p+"static/img/1.98ca4324.jpg"},abe9:function(t,e,r){t.exports=r.p+"static/img/2.6d69e1ec.jpg"},ad11:function(t,e,r){"use strict";var o=r("e4f6"),s=r.n(o);s.a},af31:function(t,e,r){},b12a:function(t,e,r){t.exports=r.p+"static/img/power1.1e97e2aa.jpeg"},c0e0:function(t,e,r){},d020:function(t,e,r){"use strict";var o=r("5694"),s=r.n(o);s.a},e005:function(t,e,r){"use strict";var o=r("c0e0"),s=r.n(o);s.a},e4f6:function(t,e,r){}});
//# sourceMappingURL=app.78b4a4b9.js.map